<?xml version="1.0" encoding="UTF-8"?>
<!-- #11. mapper 기본 설정 -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 

<!-- #12. 루트 엘리먼트 및 네임스페이스 설정하기(이 네임스페이스의 이름은 프로젝트 전체 내에서 반드시 고유해야만 한다.) --> 
<mapper namespace="map">

	<insert id="insertMetro" parameterType="java.util.HashMap">
		insert into tbl_metro(metroId, metroName, metroNum, latitude, longitude)
		values(#{metroNum}||lpad(seq_tbl_metro.nextval,3,'0'),#{metroName},#{metroNum}, #{latitude},#{longitude})
	</insert>
	
	<insert id="insertRestaurant" parameterType="java.util.HashMap">
		insert into tbl_restaurant(restSeq,restName,addr,newAddr,phone,latitude,longitude,z_index,metroId,dongId)
		values(seq_tbl_restaurant.nextval,#{restaurantTitle},#{addr},#{newAddr},#{phone},#{latitude},#{longitude},seq_tbl_restaurant.currval,#{metroId},#{dongId})    
	</insert>
	
	<select id="dongId"  parameterType="String" resultType="String" >
		select dongId
		from tbl_dong
		where dongName = #{dongName}
	</select>
	
	<select id="metroId"  parameterType="String" resultType="String" >
		select metroId
		from tbl_metro
		where metroName = #{metroName}
	</select>
	
	<resultMap type="java.util.HashMap" id="restaurantList">
		<!-- <result column="restName" 	property="restName" 	javaType="String"/>vo의 멤버변수명이다. 여기는 xml
		<result column="restSeq" 		property="restSeq" 		javaType="String"/> -->
		<result column="longitude" 		property="lng" 	javaType="Double"/>
		<result column="latitude" 		property="lat" 		javaType="Double" />  
	</resultMap>
	<select id="getRestaurantList"  resultMap="restaurantList">
		select latitude, longitude
		from tbl_restaurant
	</select>
	
</mapper>